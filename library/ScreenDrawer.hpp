#pragma once
#include "myBigChars.hpp"
#include "scTerm.hpp"
#include "scMemory.hpp"
#include "scRegistr.hpp"
#include <termios.h>
#include <fcntl.h>

class ScreenDrawer { //Класс связывающий служебный класс term, registr. memory и остальные классы призванные визуализировать
private:
    int bcint [17][2] = {
        {1717976064, 3958374}, //0b01100110011001100011110000000000, 0b00000000001111000110011001100110 '0'
        {1010315264, 3158064}, //0b00111100001110000011000000000000, 0b00000000001100000011000000110000 '1'
        {1010842624, 8258050}, //0b00111100010000000011110000000000, 0b00000000011111100000001000000010 '2'
        {2120252928, 8282238}, //0b01111110011000000111111000000000, 0b00000000011111100110000001111110 '3'
        {2120640000, 6316158}, //0b01111110011001100110011000000000, 0b00000000011000000110000001111110 '4'
        {1040350720, 4079680}, //0b00111110000000100111111000000000, 0b00000000001111100100000001000000 '5'
        {35789824, 1974814},   //0b00000010001000100001110000000000, 0b00000000000111100010001000011110 '6'
        {811630080, 396312},   //0b00110000011000000111111000000000, 0b00000000000001100000110000011000 '7'
        {1013332992, 3958374}, //0b00111100011001100011110000000000, 0b00000000001111000110011001100110 '8'
        {2087074816, 3956832}, //0b01111100011001100011110000000000, 0b00000000001111000110000001100000 '9'
        {2118269952, 4342338}, //0b01111110010000100011110000000000, 0b00000000010000100100001001000010 'A'
        {1044528640, 4080194}, //0b00111110010000100011111000000000, 0b00000000001111100100001001000010 'B'
        {37895168, 3949058},   //0b00000010010000100011110000000000, 0b00000000001111000100001000000010 'C'
        {1111637504, 4080194}, //0b01000010010000100011111000000000, 0b00000000001111100100001001000010 'D'
        {2114092544, 8258050}, //0b01111110000000100111111000000000, 0b00000000011111100000001000000010 'E'
        {33717760, 131646},    //0b00000010000000100111111000000000, 0b00000000000000100000001000111110 'F'
        {2115508224, 1579134}  //0b01111110000110000001100000000000, 0b00000000000110000001100001111110 '+'
    };

    
    Registr *registr;
    BigChars *bigChars;
    Term *term;
    Memory *memory;

    int instructionCounter = 0;
    int accumulator = 0;
    int bcValue;
public:
    ScreenDrawer(Registr *reg, Term *ter, Memory *mem);
    

    int drawMemory(int position);
    int drawFlags();
    int drawComputer();
    int drawInstructionCounter();
    int drawAccumulator();
    int drawBigChars(int value);
    void drawHelpKeys( void );
    void drawOperation( void );

    int get_Fd(void);
    void set_incstructionCounter(int value);
    int get_incstructionCounter (void);
    void set_accumulator (int value);
    int get_accumulator (void);
    
    virtual ~ScreenDrawer();
};